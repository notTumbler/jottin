<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    #chena{
      background-color: red;
      height: 100px;
    }
    
    .divtwo{
      background-color: palevioletred;
      height: 50px;
      position: absolute;
      top: 200px;
    }


  </style>
</head>
<body>

</body>
<script>
//   const chen = document.getElementById('chen');
//   // chen.onclick = function(e){
//   //   console.log(this);
//   //   console.log(e.target);
//   // }

// chen.addEventListener('click',function(e){
//   console.log(this);
// })
//**************************
// class Foo{
//   constructor(){
//      bar = function(){
//       console.log(1);
//     }
//   };
// }
// Foo.bar = function(){console.log(2);}
// Foo.prototype.bar = function(){console.log(3);}
// var bar = function(){console.log(4);}
// function bar (){console.log(5);}


// Foo.bar();//2
// bar();   // 4
// new Foo().bar(); //3
// bar();//4
// new Foo.bar();//2
// new new Foo().bar();3
//****************************************************


// const dibo = new Chen()
// console.log(dibo.prop);


// const newChen = new Chen()
// console.log(newChen);


// var str = 'aabbbbbbcdeeef'
// var x = 0;
// var y = '';

// for(var i=0;i<str.length;i++){
//   if(str[i]==y[y.length-1]){
//     x++;
//   }else{
//     if(x>0){
//       y += x+1;
//       x=0;
//     }
//     y += str[i];
//   }
// }
// console.log(y);
// a2b6cde3f


// function ajax(url){
//   return new Promise((resolve,reject)=>{
//     let xhr = new XMLHttpRequest();
//     xhr.open('GET',url,true)
//     xhr.onreadystatechange = function(){
//       if(xhr.readyState === 4){
//         if(xhr.status === 200){
//           resolve(xhr.responseText)
//         }else if(status === 404){
//           reject(new Error(`404 not found`))
//         }
//       }
//     }
//     xhr.send(null)
//   })
// }

// const url = '/data.json'
// ajax(url).then(res => console.log(res))
// .catch(err => console.log(err))

// function add(){
//   let args = Array.prototype.slice.call(arguments)

//   let _add = function(){
//     let argsT = Array.prototype.slice.call(arguments)
//     args.push(argsT)
//     return _add
//   }
// }

// const res = add(1)(3)
// console.log(res);

console.log('计算localStorage的容量')
let str = '0123456789'
let temp = ''
while(str.length <= 10240) {
  str += str
}
localStorage.clear()
const computedTotal = () => {
  return new Promise((resolve) => {
    const timer = setInterval(() => {
      try {
        localStorage.setItem('a', temp)
      } catch (error) {
        resolve(temp.length/1024)
        localStorage.clear()
        clearInterval(timer)
      }
      temp += str
    }, 0)
  })
}

(async () => {
  const total = await computedTotal()
  console.log(`最大的容量${total}kb`)
})()

</script>

</html>